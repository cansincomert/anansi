---
id: encode
title: "Encode::Encode"
description: "Generates a vector representation of text or images using the specified embedding model. If the model does not exist or has not been loaded, an error will be returned for that particular data item. <br/><br/>It is recommended that multiple pieces of content are specified in a single request to take advantage of batching, especially when running with an attached <a href='https://onnxruntime.ai/docs/execution-providers/' target='_blank'>GPU.</a> Recommended sizes can be found at <a href='/embedds/supported-models' target='_blank'>embedds/model-details</a> and batching will be automatically done.<br/>----<br/><b>Not all models support [text, images, image_uris]</b> a breakdown of present support is outlined below:<ul><li>ModelClass_INSTRUCTOR - requires: {text and data.instruction}</li><li>ModelClass_CLIP - any_of: {text, images}</li></ul>"
sidebar_label: "Encode::Encode"
hide_title: true
hide_table_of_contents: true
api: {"description":"Generates a vector representation of text or images using the specified embedding model. If the model does not exist or has not been loaded, an error will be returned for that particular data item. <br/><br/>It is recommended that multiple pieces of content are specified in a single request to take advantage of batching, especially when running with an attached <a href='https://onnxruntime.ai/docs/execution-providers/' target='_blank'>GPU.</a> Recommended sizes can be found at <a href='/embedds/supported-models' target='_blank'>embedds/model-details</a> and batching will be automatically done.<br/>----<br/><b>Not all models support [text, images, image_uris]</b> a breakdown of present support is outlined below:<ul><li>ModelClass_INSTRUCTOR - requires: {text and data.instruction}</li><li>ModelClass_CLIP - any_of: {text, images}</li></ul>","operationId":"encode_","responses":{"200":{"description":"A successful response.","content":{"application/json":{"schema":{"type":"object","properties":{"results":{"type":"array","items":{"type":"object","properties":{"err_message":{"type":"string","description":"explanation for why the content could not be encoded"},"embedding":{"type":"array","items":{"type":"number","format":"float"},"description":"embedding representation of the the content"}},"title":"apiEncodeResult"},"description":"list of embedding results corresponding to the ordered content submitted"}},"title":"apiEncodeResponse"}}}},"default":{"description":"An unexpected error response.","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"message":{"type":"string"},"details":{"type":"array","items":{"type":"object","properties":{"@type":{"type":"string"}},"additionalProperties":{},"title":"protobufAny"}}},"title":"rpcStatus"}}}}},"requestBody":{"content":{"application/json":{"schema":{"type":"object","example":{"data":[{"model_class":"ModelClass_INSTRUCTOR","model_name":"INSTRUCTOR_LARGE","text":["3D ActionSLAM: wearable person tracking ...","Inside Gohar World and the Fine, Fantastical Art"],"instructions":["Represent the Science title:","Represent the Magazine title:"]}]},"properties":{"batches":{"type":"array","items":{"type":"object","properties":{"model_class":{"type":"string","enum":["ModelClass_Unknown","ModelClass_CLIP","ModelClass_INSTRUCTOR","ModelClass_E5"],"default":"ModelClass_Unknown","title":"apiModelClass"},"model_name":{"type":"string","description":"specific name of the model to apply the encoding transformation"},"text":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"value":{"type":"string"},"bytes":{"type":"string","format":"byte"},"instruction":{"type":"string"}},"title":"apiContent"}}},"title":"apiTextContent"},"images":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"value":{"type":"string"},"bytes":{"type":"string","format":"byte"},"instruction":{"type":"string"}},"title":"apiContent"}}},"title":"apiImageContent"},"image_uris":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"value":{"type":"string"},"bytes":{"type":"string","format":"byte"},"instruction":{"type":"string"}},"title":"apiContent"}}},"title":"apiImageURIContent"}},"description":"Minimal encoding unit associating a piece of content [text, image, image_uri] with a selected model","required":["model"],"title":"apiEncodeBatch"},"description":"repeated data items to generate encodings for","title":"batching occurs at the EncodeBundle level - to ensure proper optimization, one will need\nto ensure that for a given model, you provide _all_ the data that must be encoded by\nsaid model"}},"title":"apiEncodeRequest"}}},"required":true},"tags":["Api"],"method":"post","path":"/encode","jsonRequestBodyExample":{"data":[{"model_class":"ModelClass_INSTRUCTOR","model_name":"INSTRUCTOR_LARGE","text":["3D ActionSLAM: wearable person tracking ...","Inside Gohar World and the Fine, Fantastical Art"],"instructions":["Represent the Science title:","Represent the Magazine title:"]}]},"info":{"title":"embedds","version":"1.0.0","contact":{"name":"anansi","url":"https://github.com/infrawhispers/anansi","email":"infrawhispers@proton.me"},"license":{"name":"Apache 2.0 License","url":"https://github.com/infrawhispers/anansi/blob/main/LICENSE"}},"postman":{"name":"Encode::Encode","description":{"content":"Generates a vector representation of text or images using the specified embedding model. If the model does not exist or has not been loaded, an error will be returned for that particular data item. <br/><br/>It is recommended that multiple pieces of content are specified in a single request to take advantage of batching, especially when running with an attached <a href='https://onnxruntime.ai/docs/execution-providers/' target='_blank'>GPU.</a> Recommended sizes can be found at <a href='/embedds/supported-models' target='_blank'>embedds/model-details</a> and batching will be automatically done.<br/>----<br/><b>Not all models support [text, images, image_uris]</b> a breakdown of present support is outlined below:<ul><li>ModelClass_INSTRUCTOR - requires: {text and data.instruction}</li><li>ModelClass_CLIP - any_of: {text, images}</li></ul>","type":"text/plain"},"url":{"path":["encode"],"host":["{{baseUrl}}"],"query":[],"variable":[]},"header":[{"key":"Content-Type","value":"application/json"},{"key":"Accept","value":"application/json"}],"method":"POST","body":{"mode":"raw","raw":"\"\"","options":{"raw":{"language":"json"}}}}}
sidebar_class_name: "post api-method"
info_path: swagger-api/embedds
custom_edit_url: null
---

import ApiTabs from "@theme/ApiTabs";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import TabItem from "@theme/TabItem";

## Encode::Encode



Generates a vector representation of text or images using the specified embedding model. If the model does not exist or has not been loaded, an error will be returned for that particular data item. <br/><br/>It is recommended that multiple pieces of content are specified in a single request to take advantage of batching, especially when running with an attached <a href='https://onnxruntime.ai/docs/execution-providers/' target='_blank'>GPU.</a> Recommended sizes can be found at <a href='/embedds/supported-models' target='_blank'>embedds/model-details</a> and batching will be automatically done.<br/>----<br/><b>Not all models support [text, images, image_uris]</b> a breakdown of present support is outlined below:<ul><li>ModelClass_INSTRUCTOR - requires: {text and data.instruction}</li><li>ModelClass_CLIP - any_of: {text, images}</li></ul>

<MimeTabs><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Request Body</strong><strong style={{"fontSize":"var(--ifm-code-font-size)","color":"var(--openapi-required)"}}> required</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>batches</strong><span style={{"opacity":"0.6"}}> object[]</span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

repeated data items to generate encodings for

</div><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem","paddingBottom":".5rem"}}>Array [</div></li><SchemaItem collapsible={false} name={"model_class"} required={false} schemaName={"apiModelClass"} qualifierMessage={"**Possible values:** [`ModelClass_Unknown`, `ModelClass_CLIP`, `ModelClass_INSTRUCTOR`, `ModelClass_E5`]"} schema={{"type":"string","enum":["ModelClass_Unknown","ModelClass_CLIP","ModelClass_INSTRUCTOR","ModelClass_E5"],"default":"ModelClass_Unknown","title":"apiModelClass"}}></SchemaItem><SchemaItem collapsible={false} name={"model_name"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"specific name of the model to apply the encoding transformation"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>text</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>data</strong><span style={{"opacity":"0.6"}}> object[]</span></summary><div style={{"marginLeft":"1rem"}}><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem","paddingBottom":".5rem"}}>Array [</div></li><SchemaItem collapsible={false} name={"id"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"value"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"bytes"} required={false} schemaName={"byte"} qualifierMessage={undefined} schema={{"type":"string","format":"byte"}}></SchemaItem><SchemaItem collapsible={false} name={"instruction"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem"}}>]</div></li></div></details></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>images</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>data</strong><span style={{"opacity":"0.6"}}> object[]</span></summary><div style={{"marginLeft":"1rem"}}><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem","paddingBottom":".5rem"}}>Array [</div></li><SchemaItem collapsible={false} name={"id"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"value"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"bytes"} required={false} schemaName={"byte"} qualifierMessage={undefined} schema={{"type":"string","format":"byte"}}></SchemaItem><SchemaItem collapsible={false} name={"instruction"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem"}}>]</div></li></div></details></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>image_uris</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>data</strong><span style={{"opacity":"0.6"}}> object[]</span></summary><div style={{"marginLeft":"1rem"}}><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem","paddingBottom":".5rem"}}>Array [</div></li><SchemaItem collapsible={false} name={"id"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"value"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"bytes"} required={false} schemaName={"byte"} qualifierMessage={undefined} schema={{"type":"string","format":"byte"}}></SchemaItem><SchemaItem collapsible={false} name={"instruction"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem"}}>]</div></li></div></details></SchemaItem></div></details></SchemaItem><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem"}}>]</div></li></div></details></SchemaItem></ul></details></TabItem></MimeTabs><div><ApiTabs><TabItem label={"200"} value={"200"}><div>

A successful response.

</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>results</strong><span style={{"opacity":"0.6"}}> object[]</span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

list of embedding results corresponding to the ordered content submitted

</div><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem","paddingBottom":".5rem"}}>Array [</div></li><SchemaItem collapsible={false} name={"err_message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"explanation for why the content could not be encoded"}}></SchemaItem><SchemaItem collapsible={false} name={"embedding"} required={false} schemaName={"float[]"} qualifierMessage={undefined} schema={{"type":"array","items":{"type":"number","format":"float"},"description":"embedding representation of the the content"}}></SchemaItem><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem"}}>]</div></li></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"results\": [\n    {\n      \"err_message\": \"string\",\n      \"embedding\": [\n        0\n      ]\n    }\n  ]\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"default"} value={"default"}><div>

An unexpected error response.

</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32"}}></SchemaItem><SchemaItem collapsible={false} name={"message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>details</strong><span style={{"opacity":"0.6"}}> object[]</span></summary><div style={{"marginLeft":"1rem"}}><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem","paddingBottom":".5rem"}}>Array [</div></li><SchemaItem collapsible={false} name={"@type"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string"}}></SchemaItem><li><div style={{"fontSize":"var(--ifm-code-font-size)","opacity":"0.6","marginLeft":"-.5rem"}}>]</div></li></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"code\": 0,\n  \"message\": \"string\",\n  \"details\": [\n    {\n      \"@type\": \"string\"\n    }\n  ]\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div>
      